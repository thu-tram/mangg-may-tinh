<!DOCTYPE HTML>
<html lang="vi" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>BGP Implementation and Issues - Mạngg máy tính - Thư trạm</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../intro/intro.html"><strong aria-hidden="true">1.</strong> Giới thiệu về Internet</a></li><li class="chapter-item expanded "><a href="../intro/layers.html"><strong aria-hidden="true">2.</strong> Các Layer của Internet</a></li><li class="chapter-item expanded "><a href="../intro/headers.html"><strong aria-hidden="true">3.</strong> Headers</a></li><li class="chapter-item expanded "><a href="../intro/architecture.html"><strong aria-hidden="true">4.</strong> Kiến trúc mạng</a></li><li class="chapter-item expanded "><a href="../intro/sharing-resources.html"><strong aria-hidden="true">5.</strong> Designing Resource Sharing</a></li><li class="chapter-item expanded "><a href="../intro/links.html"><strong aria-hidden="true">6.</strong> Links</a></li><li class="chapter-item expanded affix "><li class="part-title">Routing</li><li class="chapter-item expanded "><a href="../routing/intro.html"><strong aria-hidden="true">7.</strong> Introduction to Routing</a></li><li class="chapter-item expanded "><a href="../routing/model.html"><strong aria-hidden="true">8.</strong> Model for Intra-Domain Routing</a></li><li class="chapter-item expanded "><a href="../routing/solutions.html"><strong aria-hidden="true">9.</strong> Routing States</a></li><li class="chapter-item expanded "><a href="../routing/distance-vector.html"><strong aria-hidden="true">10.</strong> Distance-Vector Protocols</a></li><li class="chapter-item expanded "><a href="../routing/link-state.html"><strong aria-hidden="true">11.</strong> Link-State Protocols</a></li><li class="chapter-item expanded "><a href="../routing/addressing.html"><strong aria-hidden="true">12.</strong> Addressing</a></li><li class="chapter-item expanded "><a href="../routing/router.html"><strong aria-hidden="true">13.</strong> Router Hardware</a></li><li class="chapter-item expanded "><a href="../routing/autonomous-systems.html"><strong aria-hidden="true">14.</strong> Model for Inter-Domain Routing</a></li><li class="chapter-item expanded "><a href="../routing/bgp.html"><strong aria-hidden="true">15.</strong> Border Gateway Protocol (BGP)</a></li><li class="chapter-item expanded "><a href="../routing/bgp-implementation.html" class="active"><strong aria-hidden="true">16.</strong> BGP Implementation and Issues</a></li><li class="chapter-item expanded "><a href="../routing/ip-header.html"><strong aria-hidden="true">17.</strong> IP Header</a></li><li class="chapter-item expanded affix "><li class="part-title">Transport</li><li class="chapter-item expanded "><a href="../transport/reliability.html"><strong aria-hidden="true">18.</strong> Transport Layer Principles</a></li><li class="chapter-item expanded "><a href="../transport/tcp-design.html"><strong aria-hidden="true">19.</strong> TCP Design</a></li><li class="chapter-item expanded "><a href="../transport/tcp-implementation.html"><strong aria-hidden="true">20.</strong> TCP Implementation</a></li><li class="chapter-item expanded "><a href="../transport/cc-principles.html"><strong aria-hidden="true">21.</strong> Congestion Control Principles</a></li><li class="chapter-item expanded "><a href="../transport/cc-design.html"><strong aria-hidden="true">22.</strong> Congestion Control Design</a></li><li class="chapter-item expanded "><a href="../transport/cc-implementation.html"><strong aria-hidden="true">23.</strong> Congestion Control Implementation</a></li><li class="chapter-item expanded "><a href="../transport/throughput-model.html"><strong aria-hidden="true">24.</strong> TCP Throughput Model</a></li><li class="chapter-item expanded "><a href="../transport/cc-issues.html"><strong aria-hidden="true">25.</strong> Congestion Control Issues</a></li><li class="chapter-item expanded "><a href="../transport/router-based-cc.html"><strong aria-hidden="true">26.</strong> Router-Assisted Congestion Control</a></li><li class="chapter-item expanded affix "><li class="part-title">Applications</li><li class="chapter-item expanded "><a href="../applications/dns.html"><strong aria-hidden="true">27.</strong> DNS</a></li><li class="chapter-item expanded "><a href="../applications/http.html"><strong aria-hidden="true">28.</strong> HTTP</a></li><li class="chapter-item expanded affix "><li class="part-title">End-to-End</li><li class="chapter-item expanded "><a href="../end-to-end/ethernet.html"><strong aria-hidden="true">29.</strong> Ethernet</a></li><li class="chapter-item expanded "><a href="../end-to-end/l2-routing.html"><strong aria-hidden="true">30.</strong> Layer 2 Routing (STP)</a></li><li class="chapter-item expanded "><a href="../end-to-end/arp.html"><strong aria-hidden="true">31.</strong> ARP: Connecting Layers 2 and 3</a></li><li class="chapter-item expanded "><a href="../end-to-end/dhcp.html"><strong aria-hidden="true">32.</strong> DHCP: Joining Networks</a></li><li class="chapter-item expanded "><a href="../end-to-end/nat.html"><strong aria-hidden="true">33.</strong> NAT: Network Address Translation</a></li><li class="chapter-item expanded "><a href="../end-to-end/tls.html"><strong aria-hidden="true">34.</strong> TLS: Secure Bytestreams</a></li><li class="chapter-item expanded "><a href="../end-to-end/end-to-end.html"><strong aria-hidden="true">35.</strong> End-to-End Connectivity</a></li><li class="chapter-item expanded affix "><li class="part-title">Datacenters</li><li class="chapter-item expanded "><a href="../datacenter/topology.html"><strong aria-hidden="true">36.</strong> Topologies</a></li><li class="chapter-item expanded "><a href="../datacenter/datacenter-cc.html"><strong aria-hidden="true">37.</strong> Congestion Control</a></li><li class="chapter-item expanded "><a href="../datacenter/datacenter-routing.html"><strong aria-hidden="true">38.</strong> Routing</a></li><li class="chapter-item expanded "><a href="../datacenter/datacenter-addressing.html"><strong aria-hidden="true">39.</strong> Addressing</a></li><li class="chapter-item expanded "><a href="../datacenter/virtualization.html"><strong aria-hidden="true">40.</strong> Virtualization</a></li><li class="chapter-item expanded "><a href="../datacenter/sdn.html"><strong aria-hidden="true">41.</strong> Software-Defined Networking</a></li><li class="chapter-item expanded "><a href="../datacenter/host-networking.html"><strong aria-hidden="true">42.</strong> Host Networking</a></li><li class="chapter-item expanded affix "><li class="part-title">Beyond Client-Server</li><li class="chapter-item expanded "><a href="../beyond-client-server/intro.html"><strong aria-hidden="true">43.</strong> Multicast</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/ip-multicast-service-model.html"><strong aria-hidden="true">44.</strong> IP Multicast</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/dvmrp.html"><strong aria-hidden="true">45.</strong> DVMRP</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/cbt.html"><strong aria-hidden="true">46.</strong> Core-Based Trees</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/ip-multicast-challenges.html"><strong aria-hidden="true">47.</strong> IP Multicast Challenges</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/overlay-multicast.html"><strong aria-hidden="true">48.</strong> Overlay Multicast</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/collective-operations.html"><strong aria-hidden="true">49.</strong> Collective Operations</a></li><li class="chapter-item expanded "><a href="../beyond-client-server/collective-implementations.html"><strong aria-hidden="true">50.</strong> Collective Implementations</a></li><li class="chapter-item expanded affix "><li class="part-title">Wireless</li><li class="chapter-item expanded "><a href="../wireless/wireless-links.html"><strong aria-hidden="true">51.</strong> Wireless Links</a></li><li class="chapter-item expanded "><a href="../wireless/cellular.html"><strong aria-hidden="true">52.</strong> Cellular</a></li><li class="chapter-item expanded affix "><li class="part-title">Glossary</li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">53.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mạngg máy tính - Thư trạm</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/thu-tram/mangg-may-tinh/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="triển-khai-implementation-và-các-vấn-đề-của-bgp"><a class="header" href="#triển-khai-implementation-và-các-vấn-đề-của-bgp">Triển khai (Implementation) và các vấn đề của BGP</a></h1>
<h2 id="router-biên-và-router-nội-bộ"><a class="header" href="#router-biên-và-router-nội-bộ">Router Biên và Router Nội bộ</a></h2>
<p>Đến thời điểm này, chúng ta đã có một hình dung trực quan về cách <em>BGP</em> (Giao thức Cổng Biên giới - Border Gateway Protocol) hoạt động giữa các <em>AS</em> (Hệ tự trị - Autonomous System). Trong phần này, chúng ta sẽ xem cách <em>BGP</em> thực sự được triển khai ở cấp độ <em>Router</em>. Khi làm như vậy, chúng ta cũng sẽ chỉ ra cách <em>BGP</em> tương tác với các <em>routing protocol</em> nội miền đã học trước đó.</p>
<p>Cho đến nay, mô hình định tuyến liên miền của chúng ta đã coi toàn bộ một <em>AS</em> như một thực thể duy nhất, nhập và xuất các đường đi.</p>
<img width="900px" src="../assets/routing/2-165-combining1.png">
<p>Tuy nhiên, trên thực tế, <em>AS</em> chứa nhiều <em>Router</em> (và các máy chủ) được kết nối bởi các liên kết.</p>
<img width="900px" src="../assets/routing/2-166-combining2.png">
<p>Để thực sự triển khai <em>BGP</em>, chúng ta cần tất cả các <em>Router</em> bên trong <em>AS</em> hoạt động hợp tác để đóng vai trò như một nút duy nhất.</p>
<p>Trong một <em>AS</em>, chúng ta sẽ phân loại tất cả các <em>Router</em> thành hai loại. <strong><em>Border routers</em> (Router biên)</strong> có ít nhất một liên kết đến một <em>Router</em> trong một <em>AS</em> khác. <strong><em>Interior routers</em> (Router nội bộ)</strong> chỉ có liên kết đến các <em>Router</em> khác trong cùng một <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-167-borders.png">
<p>Chỉ có <em>border routers</em> cần quảng bá các tuyến đường đến các <em>AS</em> khác. Đôi khi, chúng ta gọi các <em>Router</em> quảng bá các tuyến <em>BGP</em> là <strong><em>BGP speakers</em> (các bộ phát BGP)</strong>. Các <em>BGP speakers</em> cần hiểu ngữ nghĩa và cú pháp của giao thức <em>BGP</em> (cách đọc và tạo một thông báo <em>BGP</em>, phải làm gì khi nhận được một thông báo, v.v.).</p>
<h2 id="các-phiên-bgp-ngoài-và-bgp-nội-bộ"><a class="header" href="#các-phiên-bgp-ngoài-và-bgp-nội-bộ">Các phiên BGP Ngoài và BGP Nội bộ</a></h2>
<p>Một <strong><em>BGP session</em> (phiên BGP)</strong> bao gồm hai <em>Router</em> trao đổi thông tin với nhau.</p>
<img width="900px" src="../assets/routing/2-168-bgp1.png">
<p>Một <strong><em>external BGP (eBGP) session</em> (phiên BGP ngoại)</strong> là giữa hai <em>Router</em> từ các <em>AS</em> khác nhau. Các <em>eBGP session</em> có thể được sử dụng để trao đổi các thông báo giữa các <em>AS</em> khác nhau và tìm hiểu về các tuyến đường đến các <em>AS</em> khác. Chỉ có <em>border routers</em> tham gia vào các <em>eBGP session</em> (vì <em>eBGP</em> yêu cầu giao tiếp với một <em>AS</em> khác).</p>
<img width="900px" src="../assets/routing/2-169-bgp2.png">
<p>Ngược lại, một <strong><em>internal BGP (iBGP) session</em> (phiên BGP nội)</strong> là giữa hai <em>Router</em> trong cùng một <em>AS</em> (không nhất thiết phải kết nối trực tiếp bằng một liên kết). Cụ thể hơn, nếu một <em>border router</em> biết về một tuyến đường mới, nó có thể sử dụng <em>iBGP</em> để phân phối tuyến đường mới đó đến các <em>Router</em> khác trong <em>AS</em>. Điều này cho phép tất cả các <em>Router</em> trong <em>AS</em> phối hợp và hoạt động cùng nhau như một thực thể. Cả <em>border router</em> và <em>internal router</em> đều tham gia vào các <em>iBGP session</em>.</p>
<img width="900px" src="../assets/routing/2-170-bgp3.png">
<p>Các <em>eBGP session</em> và <em>iBGP session</em> khác với <strong><em>interior gateway protocols (IGP)</em> (các giao thức cổng nội bộ)</strong>. Đây là các <em>routing protocol</em> nội miền (ví dụ: <em>distance-vector</em>, <em>link-state</em>) được triển khai trong một <em>AS</em> để định tuyến các <em>packet</em> bên trong <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-171-bgp4.png">
<p>Rất dễ nhầm lẫn giữa <em>iBGP</em> và <em>IGP</em>. Cả hai đều trao đổi thông điệp trong cùng một <em>AS</em>. Tuy nhiên, <em>iBGP</em> là một phần của giao thức liên miền, giúp các <em>Router</em> tìm hiểu về các đường đi đến các <em>AS</em> khác. <em>IGP</em> là một giao thức nội miền, giúp các <em>Router</em> tìm hiểu về các đường đi đến các đích trong cùng một <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-172-bgp5.png">
<p><em>eBGP</em>, <em>iBGP</em>, và <em>IGP</em> làm việc cùng nhau để thiết lập các tuyến đường từ bất kỳ <em>Router</em> nào đến bất kỳ <em>Router</em> nào khác trên Internet (ngay cả khi các <em>Router</em> ở trong các <em>AS</em> khác nhau).</p>
<p>Đầu tiên, mỗi <em>AS</em> chạy <em>IGP</em> để tìm hiểu các đường đi có chi phí thấp nhất giữa hai <em>Router</em> bất kỳ bên trong cùng một <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-173-bgp6.png">
<p>Tiếp theo, các <em>AS</em> chạy <em>eBGP</em>, quảng bá các tuyến đường cho nhau để tìm hiểu về các tuyến đường đến các <em>AS</em> khác.</p>
<img width="900px" src="../assets/routing/2-174-bgp7.png">
<p>Cuối cùng, các <em>AS</em> chạy <em>iBGP</em>, để một <em>Router</em> đã biết về một tuyến đường bên ngoài có thể phân phối tuyến đường đó đến tất cả các <em>Router</em> khác trong cùng <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-175-bgp8.png">
<p>Các tuyến đường học được từ <em>eBGP</em>, <em>iBGP</em>, và <em>IGP</em> có thể được sử dụng để gửi <em>packet</em> đến bất kỳ đâu trên Internet. Nếu đích nằm trong cùng một <em>AS</em> (cùng tiền tố IP), chúng ta có thể sử dụng các tuyến đường học được từ <em>IGP</em> để chuyển tiếp <em>packet</em>. Nếu đích ở một <em>AS</em> khác (tiền tố IP khác), chúng ta có thể nghĩ lại về <em>iBGP</em>, thứ đã cho chúng ta biết về bất kỳ tuyến đường bên ngoài nào được phát hiện bởi bất kỳ ai trong <em>AS</em> của tôi. Sử dụng kết quả của <em>iBGP</em>, chúng ta có thể tìm ra <em>border router</em> nào nằm trên tuyến đường bên ngoài đó. Sau đó, chúng ta có thể sử dụng <em>IGP</em> để chuyển tiếp <em>packet</em> đến đúng <em>border router</em> (sau đó nó sẽ chuyển tiếp <em>packet</em> đến <em>AS</em> tiếp theo).</p>
<img width="900px" src="../assets/routing/2-176-bgp9.png">
<p>Ví dụ cụ thể, giả sử E muốn gửi <em>packet</em> đến Z. Đầu tiên, mọi <em>Router</em> trong <em>AS</em> của E chạy <em>IGP</em>, học tất cả các tuyến đường nội bộ. Tiếp theo, một <em>Router</em> nào đó trong AS#5 quảng bá một tuyến đường đến Z bằng <em>eBGP</em>. Tại thời điểm này, chỉ có G biết rằng nó có thể đến được Z. Cuối cùng, G thông báo cho tất cả các <em>Router</em> trong <em>AS</em> của mình rằng nó có thể đến được Z, bằng cách sử dụng <em>iBGP</em>.</p>
<p>E đã nghe từ <em>iBGP</em> rằng G, một <em>Router</em> trong cùng <em>AS</em>, có thể đến được Z. Sử dụng các tuyến đường <em>IGP</em>, E có thể gửi <em>packet</em> đến G (chuyển tiếp đến F trước). Sau đó, G có thể sử dụng tuyến đường đã học trong <em>eBGP</em> để gửi <em>packet</em> đến Z.</p>
<p><em>border router</em> quảng bá một tuyến đường đến một đích bên ngoài đôi khi được gọi là <strong><em>egress router</em> (router đầu ra)</strong> cho đích đó. Đây là <em>Router</em> có thể giúp <em>packet</em> của bạn thoát khỏi mạng cục bộ và di chuyển đến các mạng khác gần đích hơn. Trong ví dụ trên, G là <em>egress router</em> cho đích Z.</p>
<p>Một hệ quả của các giao thức này là mọi <em>Router</em> đều có hai <em>forwarding table</em>. Một bảng là ánh xạ tất cả các đích nội bộ (cùng <em>AS</em>) tới một chặng tiếp theo, được điền thông tin từ <em>IGP</em>. Bảng còn lại là ánh xạ tất cả các đích bên ngoài tới một <em>egress router</em> (nơi biết một tuyến đường đến đích bên ngoài), được điền thông tin từ <em>eBGP</em>.</p>
<img width="900px" src="../assets/routing/2-177-bgp10.png">
<p>Lưu ý rằng trong bảng <em>eBGP</em>, <em>egress router</em> không nhất thiết là một chặng tiếp theo. <em>egress router</em> có thể cách xa vài chặng cục bộ, nhưng chúng ta sử dụng <em>IGP</em> để đến được <em>egress router</em> đó.</p>
<img width="900px" src="../assets/routing/2-178-bgp11.png">
<p>Chúng ta đã thấy cách <em>eBGP</em> (path-vector, quảng bá tuyến đường) và <em>IGP</em> (distance-vector hoặc link-state) được triển khai dưới dạng thuật toán. <em>iBGP</em> được triển khai như thế nào? Khi một <em>border router</em> cài đặt một tuyến đường mới đến một đích, nó phải thông báo cho các <em>Router</em> khác trong <em>AS</em>. Một giải pháp đơn giản là để <em>border router</em> trực tiếp thông báo cho mọi <em>Router</em> khác trong <em>AS</em>.</p>
<img width="900px" src="../assets/routing/2-179-bgp12.png">
<p>Giải pháp này tương đối đơn giản, mặc dù nó yêu cầu mọi <em>border router</em> phải có một <em>iBGP session</em> với mọi <em>Router</em> khác. Trong một mạng có B <em>border router</em> và tổng cộng N <em>Router</em>, giao thức này sẽ yêu cầu BN kết nối <em>iBGP</em>, và có thể không mở rộng tốt khi các mạng cục bộ lớn hơn.</p>
<p>Lưu ý: Trong thực tế, có những cách khác để kết hợp các <em>router</em> liên miền và nội miền. Bạn có thể tìm hiểu về &quot;route reflectors&quot; nếu bạn quan tâm, mặc dù chúng sẽ không được đề cập trong lớp học này.</p>
<h2 id="nhiều-liên-kết-giữa-các-as-Định-tuyến-khoai-tây-nóng"><a class="header" href="#nhiều-liên-kết-giữa-các-as-Định-tuyến-khoai-tây-nóng">Nhiều liên kết giữa các AS: Định tuyến Khoai tây nóng</a></h2>
<p>Cho đến nay, trong biểu đồ <em>AS</em> của chúng ta, chúng ta đã thể hiện hai <em>AS</em> có một liên kết (cạnh) duy nhất giữa chúng nếu chúng được kết nối. Trong thực tế, vì một <em>AS</em> thực sự bao gồm nhiều <em>Router</em>, hai <em>AS</em> có thể được kết nối bởi nhiều liên kết.</p>
<p>Trong thực tế, việc có nhiều liên kết giữa các <em>AS</em> lớn có thể hữu ích. Ví dụ, Verizon và AT&amp;T là những <em>AS</em> rất lớn với cơ sở hạ tầng trên toàn nước Mỹ. Giả sử chỉ có một liên kết giữa hai <em>AS</em> ở bờ Tây. Nếu một <em>Router</em> của Verizon ở bờ Đông và một <em>Router</em> của AT&amp;T ở bờ Đông muốn liên lạc, <em>packet</em> sẽ phải đi xuyên quốc gia trên mạng của Verizon, đi qua liên kết vào mạng của AT&amp;T, và sau đó đi ngược lại xuyên quốc gia đến đích.</p>
<img width="800px" src="../assets/routing/2-180-multilink1.png">
<p>Nhiều liên kết giữa hai <em>AS</em> cũng có nghĩa là có thể có nhiều đường đi giữa hai <em>Router</em> đi qua cùng các <em>AS</em>. Ở cấp độ <em>AS</em>, cả hai đường đi này đều đi qua cùng các <em>AS</em>, và mô hình trước đó của chúng ta không phân biệt giữa chúng. Tuy nhiên, trong mô hình chi tiết hơn của chúng ta, cả hai đường đi cần được xuất ra, và một tuyến đường ưu tiên phải được nhập vào.</p>
<img width="800px" src="../assets/routing/2-181-multilink2.png">
<p>Nếu có hai tuyến đường, <em>AS</em> nhập sẽ ưu tiên tuyến đường nào?</p>
<img width="800px" src="../assets/routing/2-182-multilink3.png">
<p><em>Bandwidth</em> tốn tiền, vì vậy tôi sẽ ưu tiên nếu lưu lượng này đi càng xa càng tốt trên cơ sở hạ tầng do người khác sở hữu và chi trả, và đi càng ít càng tốt trên cơ sở hạ tầng của riêng tôi. Do đó, đường màu cam được ưu tiên.</p>
<p>Chính thức hơn, <em>AS</em> nhập nhận được hai thông báo: một từ <em>router</em> phía Tây, và một từ <em>router</em> phía Đông.</p>
<img width="900px" src="../assets/routing/2-183-multilink4.png">
<p>Sử dụng <em>iBGP</em>, mọi <em>Router</em> bên trong <em>AS</em> đều thấy cả hai thông báo. Một thông báo nói rằng, <em>egress router</em> là <em>router</em> phía Tây, và thông báo còn lại nói rằng, <em>egress router</em> là <em>router</em> phía Đông. Mọi <em>Router</em> phải quyết định nên nhập thông báo nào.</p>
<img width="900px" src="../assets/routing/2-184-multilink5.png">
<p>Hãy tập trung vào <em>Router</em> E. Sử dụng <em>IGP</em>, <em>Router</em> này có thể tìm ra khoảng cách đến <em>egress router</em> phía Tây (F), và khoảng cách đến <em>egress router</em> phía Đông (I). Vì <em>egress router</em> phía Tây (F) gần hơn, việc định tuyến <em>packet</em> qua <em>egress router</em> phía Tây (F) sẽ sử dụng ít <em>bandwidth</em> của <em>AS</em> này hơn. Do đó, <em>Router</em> này sẽ nhập đường đi qua <em>egress router</em> phía Tây (F). Một <em>Router</em> khác, chẳng hạn như một <em>Router</em> gần <em>egress router</em> phía Đông (I) hơn, có thể quyết định nhập một đường đi khác.</p>
<img width="900px" src="../assets/routing/2-185-multilink6.png">
<p>Chiến lược chọn <em>egress router</em> gần nhất này đôi khi được gọi là <strong><em>hot potato routing</em> (định tuyến khoai tây nóng)</strong>. Chúng ta muốn <em>packet</em> rời khỏi <em>AS</em> của mình càng sớm càng tốt, và bắt đầu di chuyển trên các liên kết của người khác càng sớm càng tốt.</p>
<h2 id="nhiều-liên-kết-giữa-các-router-med"><a class="header" href="#nhiều-liên-kết-giữa-các-router-med">Nhiều liên kết giữa các Router: MED</a></h2>
<p>Điều gì sẽ xảy ra nếu một <em>Router</em> cách đều cả hai <em>egress router</em> có thể có?</p>
<img width="800px" src="../assets/routing/2-186-med1.png">
<p>Để phá vỡ thế cân bằng, <em>AS</em> xuất có thể thông báo ưu tiên cho một tuyến đường hơn tuyến đường kia.</p>
<p><em>AS</em> xuất ưu tiên tuyến đường nào? Một lần nữa, vì <em>bandwidth</em> tốn tiền, <em>AS</em> xuất ưu tiên đường màu hồng, vì nó sử dụng ít <em>bandwidth</em> của mình hơn. Trong thông báo của đường màu hồng, <em>AS</em> xuất có thể nói thêm &quot;Tôi ưu tiên nếu bạn sử dụng đường này,&quot; và trong thông báo của đường màu cam, <em>AS</em> xuất có thể nói thêm &quot;Tôi ưu tiên nếu bạn tránh đường này.&quot;</p>
<img width="900px" src="../assets/routing/2-187-med2.png">
<p>Bây giờ, <em>Router</em> cách đều cả hai <em>egress router</em> có thể thấy thông tin bổ sung này trong thông báo <em>iBGP</em>.</p>
<img width="900px" src="../assets/routing/2-188-med3.png">
<p>Sử dụng thông tin bổ sung này, <em>Router</em> có thể chọn <em>egress router</em> trên đường màu hồng, vì <em>AS</em> xuất đã ưu tiên đường này.</p>
<img width="800px" src="../assets/routing/2-189-med4.png">
<p>Thông tin bổ sung này trong thông báo xuất được gọi là <strong><em>Multi-Exit Discriminator (MED)</em> (Bộ phân biệt đa lối ra)</strong>. Từ góc độ của bên xuất, nó chỉ ra <em>Router</em> ưu tiên của tôi để vào mạng của tôi. Từ góc độ của bên nhập, nó chỉ ra <em>Router</em> ưu tiên của <em>AS</em> khác để thoát khỏi mạng của tôi và vào mạng của <em>AS</em> kia.</p>
<p>Một cách khác để diễn giải <em>MED</em> là, khoảng cách đến đích, thông qua <em>Router</em> này. Bên xuất có thể nói, &quot; <em>router</em> bờ Tây cách đích 3 chặng,&quot; và &quot; <em>router</em> bờ Đông cách đích 12 chặng.&quot; Các số <em>MED</em> thấp hơn được ưu tiên, vì bên xuất muốn sử dụng càng ít <em>bandwidth</em> của mình càng tốt. Bên xuất thà sử dụng 3 liên kết của mình, thay vì 12 liên kết của mình.</p>
<h2 id="Ưu-tiên-chính-sách-nhập"><a class="header" href="#Ưu-tiên-chính-sách-nhập">Ưu tiên Chính sách Nhập</a></h2>
<p>Mô hình chi tiết hơn của chúng ta, nơi hai <em>AS</em> có thể được kết nối bằng nhiều liên kết, có nghĩa là bây giờ chúng ta có thêm các quy tắc chính sách nhập, ngoài các quy tắc Gao-Rexford. Khi bạn nhận được nhiều thông báo cho cùng một đích, hãy chọn một đường đi dựa trên các quy tắc phá vỡ thế cân bằng này, theo thứ tự sau:</p>
<ol>
<li>Sử dụng <strong><em>Gao-Rexford rules</em> (các quy tắc Gao-Rexford)</strong>. Chọn đường đi được quảng bá bởi một khách hàng, hơn đường đi được quảng bá bởi một đối tác ngang hàng, hơn đường đi được quảng bá bởi một nhà cung cấp.</li>
<li>Nếu nhiều đường đi có cùng mức độ ưu tiên Gao-Rexford (ví dụ: hai đường đi từ khách hàng), hãy chọn <strong>đường đi ngắn hơn</strong> (đường đi qua ít <em>AS</em> hơn).</li>
<li>Nếu nhiều đường đi có cùng độ dài, hãy chọn đường đi có <strong><em>egress router</em> gần hơn</strong> (sử dụng <em>IGP</em> để tìm khoảng cách đến mỗi <em>egress router</em>).</li>
<li>Nếu nhiều đường đi có cùng khoảng cách đến <em>egress router</em>, hãy chọn đường đi có <strong><em>MED</em> thấp hơn</strong> (trong đó <em>MED</em> được bao gồm trong quảng bá).</li>
<li>Nếu nhiều đường đi có cùng <em>MED</em>, <strong>phá vỡ thế cân bằng một cách tùy ý</strong> (ví dụ: chọn <em>Router</em> có địa chỉ IP thấp hơn).</li>
</ol>
<img width="900px" src="../assets/routing/2-190-med5.png">
<p>Lưu ý rằng <em>egress router</em> gần nhất (<em>hot potato routing</em>) và <em>MED</em> thường mâu thuẫn với nhau. Mọi <em>AS</em> đều muốn giảm thiểu việc sử dụng <em>bandwidth</em> của mình, và muốn <em>packet</em> được vận chuyển trên <em>bandwidth</em> của các <em>AS</em> khác.</p>
<p>Với tư cách là <em>AS</em> xuất, tôi muốn <em>packet</em> vào <em>AS</em> của mình càng gần đích càng tốt. Điều này có nghĩa là tôi muốn <em>AS</em> nhập mang <em>packet</em> đi rất xa (đường dài đến <em>egress router</em>).</p>
<img width="900px" src="../assets/routing/2-191-med6.png">
<p>Ngược lại, với tư cách là <em>AS</em> nhập, tôi muốn mang <em>packet</em> đi càng ít càng tốt (đường ngắn đến <em>egress router</em>). Điều này có nghĩa là tôi muốn <em>packet</em> vào <em>AS</em> kia càng xa đích càng tốt (buộc <em>AS</em> kia phải làm tất cả công việc).</p>
<img width="900px" src="../assets/routing/2-192-med7.png">
<p>Một hệ quả của sự mâu thuẫn này là các đường đi qua Internet thường không đối xứng. Nếu hai máy chủ đang gửi <em>packet</em> qua lại, đường đi theo một hướng có thể khác với đường đi theo hướng ngược lại.</p>
<img width="800px" src="../assets/routing/2-193-med8.png">
<p>Trong ví dụ này, đối với các <em>packet</em> đi về phía Đông, A chọn <em>egress router</em> phía Tây và buộc B phải mang lưu lượng đi gần hết quãng đường. Ở chiều ngược lại (về phía Tây), B chọn <em>egress router</em> phía Đông, và buộc A phải mang lưu lượng đi gần hết quãng đường.</p>
<p>Về cơ bản, <em>BGP</em> cho phép hành vi này vì mọi <em>AS</em> đều được cấp quyền tự chủ để đặt chính sách của riêng mình (ở đây, chính sách đó là <em>hot potato routing</em>).</p>
<p>Trong thực tế, đôi khi các <em>AS</em> sẽ cố gắng thực hiện các chiến lược thông minh hơn để lừa các <em>AS</em> khác mang <em>packet</em> đi xa hơn. Hoặc, một <em>AS</em> có <em>bandwidth</em> tốt hơn có thể đồng ý mang lưu lượng của bạn đi xa hơn, nếu bạn trả một khoản phí cao cấp.</p>
<h2 id="các-loại-thông-điệp-bgp-và-thuộc-tính-tuyến-đường"><a class="header" href="#các-loại-thông-điệp-bgp-và-thuộc-tính-tuyến-đường">Các loại thông điệp BGP và Thuộc tính tuyến đường</a></h2>
<p>Hãy nhớ lại rằng một giao thức phải xác định cú pháp và ngữ nghĩa. Cụ thể, <em>BGP</em> phải xác định cấu trúc của các thông điệp được gửi và nhận. <em>BGP</em> cũng phải xác định một <em>Router</em> nên làm gì khi nhận được một thông điệp.</p>
<p>Có bốn loại thông điệp <em>BGP</em> khác nhau. Thông điệp Open có thể được sử dụng để bắt đầu một phiên giữa hai <em>Router</em> để giao tiếp với nhau. Thông điệp KeepAlive có thể được sử dụng để xác nhận rằng một phiên vẫn đang mở, ngay cả khi các thông điệp không được gửi gần đây. Thông điệp Notification có thể được sử dụng để xử lý lỗi. Chúng ta sẽ không mô tả ba loại thông điệp đầu tiên này một cách chi tiết hơn.</p>
<p>Chúng ta sẽ tập trung vào loại thông điệp thứ tư và thú vị nhất, Update. Các thông điệp này được sử dụng để thông báo các tuyến đường mới, thay đổi các tuyến đường hiện có, hoặc xóa các tuyến đường không còn hoạt động.</p>
<p>Thông điệp Update chứa một đích, được biểu thị bằng một tiền tố IP. Thông điệp cũng chứa <strong><em>route attributes</em> (thuộc tính tuyến đường)</strong>, có thể được sử dụng để mã hóa bất kỳ thông tin hữu ích nào tương ứng với tiền tố IP đó. Các <em>route attributes</em> là một tập hợp các cặp tên-giá trị, trong đó tên cho biết loại thuộc tính, và giá trị cho biết giá trị của thuộc tính đó. Một ví dụ về các thuộc tính không liên quan đến mạng có thể là: color=red, shape=triangle. Tên thuộc tính là color và shape, và chúng tương ứng với các giá trị red và triangle.</p>
<p>Một số thuộc tính là cục bộ cho một <em>AS</em>, và chỉ được trao đổi trong các thông điệp <em>iBGP</em>. Các thuộc tính khác là toàn cục, và có thể được gửi trong các quảng bá <em>eBGP</em>.</p>
<p>Có nhiều thuộc tính <em>BGP</em>, nhưng chúng ta sẽ tập trung vào ba thuộc tính quan trọng, được sử dụng để mã hóa các quy tắc phá vỡ thế cân bằng khác nhau để nhập đường đi.</p>
<p>Thuộc tính <strong><em>LOCAL PREFERENCE</em> (Ưu tiên Cục bộ)</strong> mã hóa các quy tắc nhập Gao-Rexford (quy tắc phá vỡ thế cân bằng ưu tiên hàng đầu) bên trong một <em>AS</em> cụ thể. Một <em>AS</em> có thể gán một giá trị cao hơn cho các tuyến đường được ưu tiên hơn (ví dụ: từ khách hàng), và một giá trị thấp hơn cho các tuyến đường ít được ưu tiên hơn (ví dụ: từ các nhà cung cấp). Thuộc tính này là cục bộ, và chỉ được mang trong các thông điệp <em>iBGP</em>. Thuộc tính này không được gửi đến các <em>AS</em> khác trong các thông báo <em>eBGP</em>, vì các <em>AS</em> khác không cần biết về các ưu tiên của <em>AS</em> này.</p>
<img width="900px" src="../assets/routing/2-194-attribute1.png">
<p>Ví dụ, giả sử <em>Router</em> E nhận được một thông báo <em>eBGP</em> từ AS#7, và <em>Router</em> A biết rằng AS#7 là một khách hàng. Sau đó, trong thông điệp <em>iBGP</em>, <em>Router</em> E có thể đặt giá trị <em>local preference</em> là 3000 (số cao). Bây giờ, mọi <em>Router</em> khác trong cùng <em>AS</em> đều biết rằng <em>Router</em> E có thể đến được đích mà nó đang thông báo, thông qua đường đi trong thuộc tính <em>ASPATH</em>, với <em>local preference</em> là 3000.</p>
<p>Ngược lại, nếu <em>Router</em> D nhận được một thông báo <em>eBGP</em> từ AS#79, và <em>AS</em> này là một đối tác ngang hàng, thì trong thông điệp <em>iBGP</em>, <em>Router</em> D có thể đặt giá trị <em>local preference</em> thấp hơn là 1000 và sau đó phân phối đường đi này (với <em>local preference</em> thấp hơn) đến các <em>Router</em> khác trong <em>AS</em>.</p>
<p>Các số <em>local preference</em> là tùy ý, và chỉ có thứ hạng tương đối của chúng là quan trọng. Trong ví dụ trên, các số có thể là 300 và 100 thay vì 3000 và 1000, và hành vi sẽ giống nhau. Các số <em>local preference</em> thường được các nhà khai thác đặt thủ công.</p>
<p>Thuộc tính <strong><em>ASPATH</em> (Đường đi AS)</strong> chứa một danh sách các <em>AS</em> dọc theo tuyến đường đang được quảng bá (theo thứ tự ngược lại). Thuộc tính này là toàn cục, và có thể được gửi trong các thông báo <em>eBGP</em>.</p>
<img width="800px" src="../assets/routing/2-195-attribute2.png">
<p>Ví dụ, một thông báo sẽ có tiền tố IP của đích (128.112.0.0/16), và một thuộc tính <em>ASPATH</em> là.</p>
<p><em>ASPATH</em> là quy tắc phá vỡ thế cân bằng ưu tiên thứ hai khi nhập đường đi. Nếu hai thông báo có cùng <em>local preference</em> (ví dụ: cả hai đều từ khách hàng), thì chúng ta sẽ chọn đường đi ngắn hơn. <em>ASPATH</em> cho chúng ta biết độ dài của mỗi đường đi, được đo bằng số lượng <em>AS</em> mà đường đi đó đi qua.</p>
<p>Nếu <em>local preference</em> và độ dài đường đi bằng nhau, quy tắc phá vỡ thế cân bằng ưu tiên thứ ba là chi phí <em>IGP</em> đến <em>egress router</em>. Chi phí này được lưu trữ trong <em>forwarding table</em> cục bộ của <em>Router</em> (ví dụ: một giao thức distance-vector cục bộ sẽ lưu trữ chi phí đến mọi <em>Router</em> khác trong cùng <em>AS</em>).</p>
<p>Thuộc tính <em><strong>MED</strong></em> mã hóa các ưu tiên của <em>AS</em> xuất. Tương đương, thuộc tính này đại diện cho khoảng cách từ <em>Router</em> xuất đến đích (số thấp hơn được ưu tiên).</p>
<img width="900px" src="../assets/routing/2-196-attribute3.png">
<p>Ví dụ, nếu có hai liên kết giữa hai <em>AS</em> này, cả hai <em>border router</em> từ <em>AS</em> xuất sẽ thông báo một đường đi. <em>ASPATH</em> và đích là giống nhau, vì đường đi của các <em>AS</em> đến đích là giống nhau trong cả hai trường hợp. Tuy nhiên, <em>router</em> phía Tây sẽ bao gồm một số thuộc tính <em>MED</em> thấp hơn, so với <em>router</em> phía Đông. Điều này nói rằng: khi có thể, vui lòng định tuyến các <em>packet</em> cho đích thông qua <em>router</em> phía Tây của tôi (số thấp hơn), vì <em>router</em> này gần đích hơn.</p>
<p>Nếu <em>local preference</em>, độ dài đường đi, và khoảng cách đến <em>egress router</em> đều bằng nhau, quy tắc phá vỡ thế cân bằng ưu tiên thứ tư là số <em>MED</em> bên trong mỗi thông báo.</p>
<h2 id="các-vấn-đề-với-bgp"><a class="header" href="#các-vấn-đề-với-bgp">Các vấn đề với BGP</a></h2>
<p><em>BGP</em> không có đảm bảo bảo mật tích hợp. Một <em>AS</em> độc hại có thể nói dối và quảng bá một tuyến đường đến một đích, ngay cả khi <em>AS</em> đó không thể đến được đích đó. Một <em>AS</em> độc hại cũng có thể quảng bá một tuyến đường rất rẻ đến một đích, ngay cả khi tuyến đường rẻ đó thực sự không tồn tại. Điều này có thể khuyến khích các <em>AS</em> khác định tuyến <em>packet</em> qua <em>AS</em> độc hại, nơi kẻ tấn công có thể xóa hoặc sửa đổi các <em>packet</em> đi qua <em>AS</em> độc hại. Các cuộc tấn công này được gọi là <strong><em>prefix hijacking</em> (chiếm đoạt tiền tố)</strong>. Hiện có nghiên cứu tích cực về việc sử dụng mật mã để bảo mật <em>BGP</em>, mặc dù các giao thức như vậy chưa được triển khai rộng rãi.</p>
<p><em>BGP</em> ưu tiên chính sách hơn là chi phí thấp nhất khi chọn đường đi. Ngoài ra, vì <em>BGP</em> đo độ dài đường đi bằng số lượng <em>AS</em>, độ dài đường đi có thể gây hiểu nhầm (ví dụ: một <em>AS</em> có thể chứa 2 <em>Router</em> hoặc 200 <em>Router</em> dọc theo đường đi đang được quảng bá). Điều này có thể dẫn đến các vấn đề trong đó các <em>packet</em> không phải lúc nào cũng đi theo đường có chi phí thấp nhất, và rất khó để lý giải về hiệu suất trên Internet. Một số người có thể phân loại đây là các vấn đề, mặc dù chúng có thể là một sự đánh đổi thiết kế có chủ ý. Các nhà thiết kế <em>BGP</em> đã đưa ra một lựa chọn thiết kế có ý thức để ưu tiên chính sách và che giấu cấu trúc liên kết nội bộ của một <em>AS</em>, đổi lại là hiệu suất.</p>
<p><em>BGP</em> phức tạp để triển khai. Có nhiều chi tiết triển khai tinh vi mà chúng ta không đề cập đến. Ngay cả trong các chủ đề chúng ta đã đề cập, một số cấu hình nhất định như <em>local preference</em> hoặc số <em>MED</em> phải được nhà khai thác đặt thủ công, và các cấu hình không chính xác có thể dẫn đến các đường đi không chính xác lan truyền qua mạng. Cấu hình sai <em>BGP</em> thường có thể dẫn đến sự cố mất mạng Internet, và có nghiên cứu tích cực về các công cụ để xác minh rằng <em>BGP</em> được cấu hình đúng.</p>
<p><em>BGP</em> yêu cầu một số giả định nhất định (mọi người đều tuân theo các quy tắc Gao-Rexford, biểu đồ <em>AS</em> tạo thành một hệ thống phân cấp, không có chu trình nhà cung cấp-khách hàng) để đảm bảo khả năng tiếp cận và hội tụ. Nếu các giả định này không được đáp ứng (ví dụ: một <em>AS</em> chọn chính sách riêng vi phạm Gao-Rexford), <em>BGP</em> có thể tạo ra hành vi không ổn định, trong đó các tuyến đường không bao giờ hội tụ, hoặc các chu trình và ngõ cụt xuất hiện.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../routing/bgp.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../routing/ip-header.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../routing/bgp.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../routing/ip-header.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
